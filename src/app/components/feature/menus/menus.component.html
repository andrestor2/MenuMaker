<div class="column">
  <div *ngIf="processedMenu.length === 0">
    <h2>Load Menu</h2>
    <div>
      <form>
        <div>
          <label for="email1">User name </label><br>
          <input type="text" id="email" name="email" [(ngModel)]="username" class="email" maxlength="256" required />
        </div>
        <div>
          <label for="password">Password </label><br>
          <input type="password" id="password" name="password" [(ngModel)]="password" class="password" required
            minlength="8" maxlength="16" />
        </div>
        <br>
        <button id="login" type="button" (click)="loadMenu(false)">Load menu
          <i class="fa fa-sign-in" aria-hidden="true"></i>
        </button>
      </form>
    </div>
  </div>
</div>
<div *ngIf="processedMenu.length !== 0">
  <h2>Menu loaded</h2>
  <div class="d-grid gap-2 d-md-flex justify-content-md-evenly">
    <button class="btn btn-primary btn btn-danger" (disabled)="menuLoaded" (click)="reloadMenu()"> Reload Menu
    </button>
    <button class="btn btn-warning" (click)="downloadMenuFile()"> Download file </button>
    <button class="btn btn-primary me-md-2 btn-success" type="button" (click)="saveChanges()">Guardar</button>
  </div>
  <span>Last edit: {{lastEditTime | date:'mediumDate'}}</span>
  
  <div class="content" role="main">
    <table class="table table-striped table-bordered ">
      <thead>
        <tr>
          <th scope="col">Categoria</th>
          <th scope="col">Productos</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let categorie of processedMenu">
          <td>
            <input class="form-control" [(ngModel)]="categorie.name">
          </td>
          <td>
            <table class="table mb-0">
              <thead>
                <tr>
                  <th scope="col">Nombre</th>
                  <th scope="col">Precio</th>
                  <th scope="col">Adiciones</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of categorie.items">
                  <td>
                    <input class="form-control" [(ngModel)]="item.name">
                  </td>
                  <td>
                    <input class="form-control" [(ngModel)]="item.price">
                  </td>
                  <td>
                    <table *ngIf="item.additions.length != 0" class="table mb-0">
                      <thead>
                        <tr>
                          <th scope="col">Adicion</th>
                          <th scope="col">Precio</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let addition of item.additions">
                          <td>
                            <input class="form-control" [(ngModel)]="addition.name">
                          </td>
                          <td>
                            <input class="form-control" [(ngModel)]="addition.price">
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>